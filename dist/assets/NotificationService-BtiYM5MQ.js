const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-PhcSwhut.js","assets/main-CDeWMlCH.css"])))=>i.map(i=>d[i]);
import{_ as u,e as B}from"./main-PhcSwhut.js";async function T(m,i,o){try{const{serverTimestamp:d}=await u(async()=>{const{serverTimestamp:a}=await import("./main-PhcSwhut.js").then(r=>r.Y);return{serverTimestamp:a}},__vite__mapDeps([0,1])),{getById:t}=await u(async()=>{const{getById:a}=await import("./main-PhcSwhut.js").then(r=>r.a7);return{getById:a}},__vite__mapDeps([0,1])),e=await t(m);if(!e)return;const g=await h(i),c=g?.displayName||g?.email||"Usu√°rio",l=[...e.usuariosPermitidos||[]];e.criadoPor&&!l.includes(e.criadoPor)&&l.push(e.criadoPor);const _=l.filter((a,r)=>!!a&&l.indexOf(a)===r),{create:n}=await u(async()=>{const{create:a}=await import("./main-PhcSwhut.js").then(r=>r.a4);return{create:a}},__vite__mapDeps([0,1])),w={type:"recorrente_reminder",budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:c,recorrenteId:o?.id||null,recorrenteNome:o?.nome||"Recorrente",recorrenteValor:o?.valor||0,recorrenteDescricao:o?.descricao||"",createdAt:d(),read:!1};await Promise.all(_.map(async a=>{try{await n({...w,recipientUid:a}),console.log(`üìß Notifica√ß√£o de recorrente enviada para usu√°rio: ${a}`)}catch(r){console.error(`Erro ao enviar notifica√ß√£o de recorrente para ${a}:`,r)}}))}catch(d){console.error("Erro ao enviar notifica√ß√£o de recorrente:",d)}}async function R(m,i,o){try{const{serverTimestamp:d}=await u(async()=>{const{serverTimestamp:a}=await import("./main-PhcSwhut.js").then(r=>r.Y);return{serverTimestamp:a}},__vite__mapDeps([0,1])),{getById:t}=await u(async()=>{const{getById:a}=await import("./main-PhcSwhut.js").then(r=>r.a7);return{getById:a}},__vite__mapDeps([0,1])),e=await t(m);if(!e)return;const g=await h(i),c=g?.displayName||g?.email||"Usu√°rio",l=[...e.usuariosPermitidos||[]];e.criadoPor&&!l.includes(e.criadoPor)&&l.push(e.criadoPor);const _=l.filter((a,r)=>!!a&&l.indexOf(a)===r),{create:n}=await u(async()=>{const{create:a}=await import("./main-PhcSwhut.js").then(r=>r.a4);return{create:a}},__vite__mapDeps([0,1])),w={type:"weekly_summary",budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:c,resumo:o?.resumo,periodo:o?.periodo,createdAt:d(),read:!1};await Promise.all(_.map(async a=>{try{await n({...w,recipientUid:a}),console.log(`üìß Notifica√ß√£o de resumo semanal enviada para usu√°rio: ${a}`)}catch(r){console.error(`Erro ao enviar notifica√ß√£o de resumo semanal para ${a}:`,r)}}))}catch(d){console.error("Erro ao enviar notifica√ß√£o de resumo semanal:",d)}}async function O(m,i,o){try{const{serverTimestamp:d}=await u(async()=>{const{serverTimestamp:s}=await import("./main-PhcSwhut.js").then(p=>p.Y);return{serverTimestamp:s}},__vite__mapDeps([0,1])),{getById:t}=await u(async()=>{const{getById:s}=await import("./main-PhcSwhut.js").then(p=>p.a7);return{getById:s}},__vite__mapDeps([0,1])),e=await t(m);if(!e){console.log("Or√ßamento n√£o encontrado para notifica√ß√£o");return}if(!e.usuariosPermitidos||e.usuariosPermitidos.length===0){console.log("Or√ßamento n√£o compartilhado, n√£o enviando notifica√ß√£o");return}const g=await h(i),c=g?.displayName||g?.email||"Usu√°rio";let l="Sem categoria",_=null,n=null;if(o.categoriaId){const{getById:s}=await u(async()=>{const{getById:I}=await import("./main-PhcSwhut.js").then(E=>E.a1);return{getById:I}},__vite__mapDeps([0,1])),p=await s(o.categoriaId);p&&(l=p.nome,_=p.tipo??null,n=p.limite??null)}const w={budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:c,transactionId:o.id,transactionDescricao:o.descricao,transactionValor:o.valor,transactionCategoria:l,transactionTipo:o.tipo||"despesa",transactionCategoriaTipo:_,transactionCategoriaLimite:n,recorrenteId:o.recorrenteId??null,recorrenteParcelaAtual:o.recorrenteParcelaAtual??null,recorrenteParcelasTotal:o.recorrenteParcelasTotal??null,createdAt:d(),read:!1,type:"new_transaction"},a=[...e.usuariosPermitidos||[]];e.userId&&!a.includes(e.userId)&&a.push(e.userId),e.criadoPor&&!a.includes(e.criadoPor)&&a.push(e.criadoPor);const r=a.filter((s,p)=>!!s&&a.indexOf(s)===p&&s!==i);console.log("[DEBUG] sendTransactionNotification - budgetData.usuariosPermitidos:",e.usuariosPermitidos),console.log("[DEBUG] sendTransactionNotification - budgetData.userId:",e.userId),console.log("[DEBUG] sendTransactionNotification - rawRecipients:",a),console.log("[DEBUG] sendTransactionNotification - senderUid:",i),console.log("[DEBUG] sendTransactionNotification - recipients:",r),console.log("[DEBUG] sendTransactionNotification - Propriet√°rio inclu√≠do?",r.includes(e.userId));const{create:y}=await u(async()=>{const{create:s}=await import("./main-PhcSwhut.js").then(p=>p.a4);return{create:s}},__vite__mapDeps([0,1])),f=r.map(async s=>{try{await y({...w,recipientUid:s}),console.log(`üìß Notifica√ß√£o enviada para usu√°rio: ${s}`)}catch(p){console.error(`Erro ao enviar notifica√ß√£o para ${s}:`,p)}});await Promise.all(f),console.log("‚úÖ Notifica√ß√µes enviadas com sucesso")}catch(d){console.error("Erro ao enviar notifica√ß√µes:",d)}}async function b(m,i,o){try{console.log("[DEBUG] sendTransactionDeletedNotification chamada:",{budgetId:m,senderUid:i,transactionData:o});const{serverTimestamp:d}=await u(async()=>{const{serverTimestamp:s}=await import("./main-PhcSwhut.js").then(p=>p.Y);return{serverTimestamp:s}},__vite__mapDeps([0,1])),{getById:t}=await u(async()=>{const{getById:s}=await import("./main-PhcSwhut.js").then(p=>p.a7);return{getById:s}},__vite__mapDeps([0,1])),e=await t(m);if(!e){console.log("Or√ßamento n√£o encontrado para notifica√ß√£o de exclus√£o");return}if(!e.usuariosPermitidos||e.usuariosPermitidos.length===0){console.log("Or√ßamento n√£o compartilhado, n√£o enviando notifica√ß√£o de exclus√£o");return}const g=await h(i),c=g?.displayName||g?.email||"Usu√°rio";let l="Sem categoria",_=null,n=null;if(o?.categoriaId){const{getById:s}=await u(async()=>{const{getById:I}=await import("./main-PhcSwhut.js").then(E=>E.a1);return{getById:I}},__vite__mapDeps([0,1])),p=await s(o.categoriaId);p&&(l=p.nome,_=p.tipo??null,n=p.limite??null)}const w={budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:c,transactionId:o?.id??null,transactionDescricao:o?.descricao??null,transactionValor:o?.valor??null,transactionCategoria:l,transactionTipo:o?.tipo||"despesa",transactionCategoriaTipo:_,transactionCategoriaLimite:n,createdAt:d(),read:!1,type:"deleted_transaction"},a=[...e.usuariosPermitidos||[]];e.userId&&!a.includes(e.userId)&&a.push(e.userId),e.criadoPor&&!a.includes(e.criadoPor)&&a.push(e.criadoPor);const r=a.filter((s,p)=>!!s&&a.indexOf(s)===p&&s!==i);console.log("[DEBUG] sendTransactionDeletedNotification - budgetData.usuariosPermitidos:",e.usuariosPermitidos),console.log("[DEBUG] sendTransactionDeletedNotification - budgetData.criadoPor:",e.criadoPor),console.log("[DEBUG] sendTransactionDeletedNotification - budgetData.userId:",e.userId),console.log("[DEBUG] sendTransactionDeletedNotification - rawRecipients:",a),console.log("[DEBUG] sendTransactionDeletedNotification - senderUid:",i),console.log("[DEBUG] sendTransactionDeletedNotification - recipients:",r),console.log("[DEBUG] sendTransactionDeletedNotification - Propriet√°rio inclu√≠do?",r.includes(e.userId));const{create:y}=await u(async()=>{const{create:s}=await import("./main-PhcSwhut.js").then(p=>p.a4);return{create:s}},__vite__mapDeps([0,1])),f=r.map(async s=>{try{await y({...w,recipientUid:s}),console.log(`üìß Notifica√ß√£o de exclus√£o enviada para usu√°rio: ${s}`)}catch(p){console.error(`Erro ao enviar notifica√ß√£o de exclus√£o para ${s}:`,p)}});await Promise.all(f),console.log("‚úÖ Notifica√ß√µes de exclus√£o enviadas com sucesso")}catch(d){console.error("Erro ao enviar notifica√ß√µes de exclus√£o:",d)}}async function A(m,i,o){try{const{serverTimestamp:d}=await u(async()=>{const{serverTimestamp:I}=await import("./main-PhcSwhut.js").then(E=>E.Y);return{serverTimestamp:I}},__vite__mapDeps([0,1])),{getById:t}=await u(async()=>{const{getById:I}=await import("./main-PhcSwhut.js").then(E=>E.a7);return{getById:I}},__vite__mapDeps([0,1])),e=await t(m);if(!e||!e.usuariosPermitidos||e.usuariosPermitidos.length===0)return;const g=await h(i),c=g?.displayName||g?.email||"Usu√°rio";let l="Sem categoria",_=null,n=null,w=null;if(o?.categoriaId){const{getById:I}=await u(async()=>{const{getById:P}=await import("./main-PhcSwhut.js").then(v=>v.a1);return{getById:P}},__vite__mapDeps([0,1])),E=await I(o.categoriaId);E&&(l=E.nome,_=E.tipo??null,n=E.limite??null)}if(o?.prev?.categoriaId)try{const{getById:I}=await u(async()=>{const{getById:P}=await import("./main-PhcSwhut.js").then(v=>v.a1);return{getById:P}},__vite__mapDeps([0,1])),E=await I(o.prev.categoriaId);E?.nome&&(w=E.nome)}catch{}const a={},r=o?.changeSet||{};r.valor&&r.valor.from!==r.valor.to&&(a.valor={from:r.valor.from,to:r.valor.to}),r.descricao&&r.descricao.from!==r.descricao.to&&(a.descricao={from:r.descricao.from,to:r.descricao.to}),r.tipo&&r.tipo.from!==r.tipo.to&&(a.tipo={from:r.tipo.from,to:r.tipo.to}),r.categoriaId&&r.categoriaId.from!==r.categoriaId.to&&(a.categoria={from:w||o.prev?.categoriaId||null,to:l||r.categoriaId.to});const y={budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:c,transactionId:o?.id??null,transactionDescricao:o?.descricao??null,transactionValor:o?.valor??null,transactionCategoria:l,transactionTipo:o?.tipo||"despesa",transactionCategoriaTipo:_,transactionCategoriaLimite:n,changes:a,prev:o?.prev?{descricao:o.prev.descricao??null,valor:o.prev.valor??null,categoria:w??null,tipo:o.prev.tipo??null}:null,createdAt:d(),read:!1,type:"updated_transaction"},f=[...e.usuariosPermitidos||[]];e.userId&&!f.includes(e.userId)&&f.push(e.userId),e.criadoPor&&!f.includes(e.criadoPor)&&f.push(e.criadoPor);const s=f.filter((I,E)=>!!I&&f.indexOf(I)===E&&I!==i);console.log("[DEBUG] sendTransactionUpdatedNotification - budgetData.usuariosPermitidos:",e.usuariosPermitidos),console.log("[DEBUG] sendTransactionUpdatedNotification - budgetData.userId:",e.userId),console.log("[DEBUG] sendTransactionUpdatedNotification - rawRecipients:",f),console.log("[DEBUG] sendTransactionUpdatedNotification - senderUid:",i),console.log("[DEBUG] sendTransactionUpdatedNotification - recipients:",s),console.log("[DEBUG] sendTransactionUpdatedNotification - Propriet√°rio inclu√≠do?",s.includes(e.userId));const{create:p}=await u(async()=>{const{create:I}=await import("./main-PhcSwhut.js").then(E=>E.a4);return{create:I}},__vite__mapDeps([0,1]));await Promise.all(s.map(async I=>{try{await p({...y,recipientUid:I}),console.log(`üìß Notifica√ß√£o de atualiza√ß√£o enviada para usu√°rio: ${I}`)}catch(E){console.error(`Erro ao enviar notifica√ß√£o de atualiza√ß√£o para ${I}:`,E)}}))}catch(d){console.error("Erro ao enviar notifica√ß√µes de atualiza√ß√£o:",d)}}async function L(m,i,o,d,t=null){try{const{serverTimestamp:e}=await u(async()=>{const{serverTimestamp:y}=await import("./main-PhcSwhut.js").then(f=>f.Y);return{serverTimestamp:y}},__vite__mapDeps([0,1])),{getById:g}=await u(async()=>{const{getById:y}=await import("./main-PhcSwhut.js").then(f=>f.a7);return{getById:y}},__vite__mapDeps([0,1])),c=await g(m);if(!c||!c.usuariosPermitidos||c.usuariosPermitidos.length===0)return;const l=await h(i),_=l?.displayName||l?.email||"Usu√°rio",n={};t&&(t.nome!==o?.nome&&(n.nome={from:t.nome??null,to:o?.nome??null}),t.valor!==o?.valor&&(n.valor={from:t.valor??null,to:o?.valor??null}),t.frequencia!==o?.frequencia&&(n.frequencia={from:t.frequencia??null,to:o?.frequencia??null}),t.categoria!==o?.categoria&&(n.categoria={from:t.categoria??null,to:o?.categoria??null}),t.descricao!==o?.descricao&&(n.descricao={from:t.descricao??null,to:o?.descricao??null}),t.parcelasRestantes!==o?.parcelasRestantes&&(n.parcelasRestantes={from:t.parcelasRestantes??null,to:o?.parcelasRestantes??null}),t.parcelasTotal!==o?.parcelasTotal&&(n.parcelasTotal={from:t.parcelasTotal??null,to:o?.parcelasTotal??null}));const w={budgetId:m,budgetName:c.nome||"Or√ßamento",senderUid:i,senderName:_,recorrenteId:o?.id??null,recorrenteNome:o?.nome??null,recorrenteValor:o?.valor??null,recorrenteFrequencia:o?.frequencia??null,recorrenteCategoria:o?.categoria??null,recorrenteDescricao:o?.descricao??null,recorrenteParcelasRestantes:o?.parcelasRestantes??null,recorrenteParcelasTotal:o?.parcelasTotal??null,changes:n,prev:t?{nome:t.nome??null,valor:t.valor??null,frequencia:t.frequencia??null,categoria:t.categoria??null,descricao:t.descricao??null,parcelasRestantes:t.parcelasRestantes??null,parcelasTotal:t.parcelasTotal??null}:null,type:d,createdAt:e(),read:!1},{create:a}=await u(async()=>{const{create:y}=await import("./main-PhcSwhut.js").then(f=>f.a4);return{create:y}},__vite__mapDeps([0,1])),r=c.usuariosPermitidos.filter(y=>y!==i);if(r.length===0){console.log(`[NotificationService] Nenhum outro usu√°rio no or√ßamento, enviando notifica√ß√£o para o pr√≥prio usu√°rio (${i})`);try{await a({...w,recipientUid:i}),console.log(`Notifica√ß√£o de ${d} de despesa recorrente enviada para o pr√≥prio usu√°rio (${i})`)}catch(y){console.error(`Erro ao enviar notifica√ß√£o de ${d} de despesa recorrente para o pr√≥prio usu√°rio:`,y)}}else await Promise.all(r.map(async y=>{try{await a({...w,recipientUid:y}),console.log(`Notifica√ß√£o de ${d} de despesa recorrente enviada para ${y}`)}catch(f){console.error(`Erro ao enviar notifica√ß√£o de ${d} de despesa recorrente para ${y}:`,f)}}))}catch(e){console.error("Erro ao enviar notifica√ß√µes de mudan√ßa de despesa recorrente:",e)}}async function V(m,i,o,d,t=null){try{const{serverTimestamp:e}=await u(async()=>{const{serverTimestamp:f}=await import("./main-PhcSwhut.js").then(s=>s.Y);return{serverTimestamp:f}},__vite__mapDeps([0,1])),{getById:g}=await u(async()=>{const{getById:f}=await import("./main-PhcSwhut.js").then(s=>s.a7);return{getById:f}},__vite__mapDeps([0,1])),c=await g(m);if(!c||!c.usuariosPermitidos||c.usuariosPermitidos.length===0)return;const l=await h(i),_=l?.displayName||l?.email||"Usu√°rio",n={};t&&(t.nome!==o?.nome&&(n.nome={from:t.nome??null,to:o?.nome??null}),t.tipo!==o?.tipo&&(n.tipo={from:t.tipo??null,to:o?.tipo??null}),t.limite!==o?.limite&&(n.limite={from:t.limite??null,to:o?.limite??null}),t.descricao!==o?.descricao&&(n.descricao={from:t.descricao??null,to:o?.descricao??null}),t.cor!==o?.cor&&(n.cor={from:t.cor??null,to:o?.cor??null}));const w={budgetId:m,budgetName:c.nome||"Or√ßamento",senderUid:i,senderName:_,categoryId:o?.id??null,categoryNome:o?.nome??null,categoryTipo:o?.tipo??null,categoryLimite:o?.limite??null,categoryDescription:o?.descricao??null,categoryColor:o?.cor??null,changes:n,prev:t?{nome:t.nome??null,tipo:t.tipo??null,limite:t.limite??null,descricao:t.descricao??null,cor:t.cor??null}:null,createdAt:e(),read:!1,type:d},a=[...c.usuariosPermitidos||[]];c.userId&&!a.includes(c.userId)&&a.push(c.userId),c.criadoPor&&!a.includes(c.criadoPor)&&a.push(c.criadoPor);const r=a.filter((f,s)=>!!f&&a.indexOf(f)===s&&f!==i),{create:y}=await u(async()=>{const{create:f}=await import("./main-PhcSwhut.js").then(s=>s.a4);return{create:f}},__vite__mapDeps([0,1]));await Promise.all(r.map(async f=>{try{await y({...w,recipientUid:f}),console.log(`üìß Notifica√ß√£o de categoria (${d}) enviada para usu√°rio: ${f}`)}catch(s){console.error(`Erro ao enviar notifica√ß√£o de categoria para ${f}:`,s)}}))}catch(e){console.error("Erro ao enviar notifica√ß√µes de categoria:",e)}}async function S(m){try{const{updateDoc:i,doc:o,arrayRemove:d}=await u(async()=>{const{updateDoc:c,doc:l,arrayRemove:_}=await import("./main-PhcSwhut.js").then(n=>n.Y);return{updateDoc:c,doc:l,arrayRemove:_}},__vite__mapDeps([0,1])),{db:t}=await u(async()=>{const{db:c}=await import("./main-PhcSwhut.js").then(l=>l.Z);return{db:c}},__vite__mapDeps([0,1])),e=window.appState.currentUser;if(!e){console.error("Usu√°rio n√£o autenticado");return}const g=o(t,"budgets",m);await i(g,{usuariosPermitidos:d(e.uid)}),console.log("‚úÖ Usu√°rio removido do or√ßamento compartilhado"),window.Snackbar&&window.Snackbar({message:"‚úÖ Sa√≠da do or√ßamento realizada com sucesso",type:"success"})}catch(i){console.error("Erro ao sair do or√ßamento:",i),window.Snackbar&&window.Snackbar({message:"‚ùå Erro ao sair do or√ßamento",type:"error"})}}async function k(m,i){try{const{updateDoc:o,doc:d,arrayRemove:t}=await u(async()=>{const{updateDoc:l,doc:_,arrayRemove:n}=await import("./main-PhcSwhut.js").then(w=>w.Y);return{updateDoc:l,doc:_,arrayRemove:n}},__vite__mapDeps([0,1])),{db:e}=await u(async()=>{const{db:l}=await import("./main-PhcSwhut.js").then(_=>_.Z);return{db:l}},__vite__mapDeps([0,1]));if(!window.appState.currentUser){console.error("Usu√°rio n√£o autenticado");return}const c=d(e,"budgets",m);await o(c,{usuariosPermitidos:t(i)}),console.log("‚úÖ Usu√°rio removido do or√ßamento compartilhado"),window.Snackbar&&window.Snackbar({message:"‚úÖ Usu√°rio removido com sucesso",type:"success"})}catch(o){console.error("Erro ao remover usu√°rio:",o),window.Snackbar&&window.Snackbar({message:"‚ùå Erro ao remover usu√°rio",type:"error"})}}async function h(m){try{const{getDoc:i,doc:o}=await u(async()=>{const{getDoc:e,doc:g}=await import("./main-PhcSwhut.js").then(c=>c.Y);return{getDoc:e,doc:g}},__vite__mapDeps([0,1])),{db:d}=await u(async()=>{const{db:e}=await import("./main-PhcSwhut.js").then(g=>g.Z);return{db:e}},__vite__mapDeps([0,1])),t=await i(o(d,"users",m));return t.exists()?t.data():{displayName:"Usu√°rio desconhecido",email:"email@desconhecido.com"}}catch(i){return console.error("Erro ao buscar informa√ß√µes do usu√°rio:",i),{displayName:"Erro ao carregar",email:"erro@carregar.com"}}}async function C(m,i){try{const{serverTimestamp:o}=await u(async()=>{const{serverTimestamp:n}=await import("./main-PhcSwhut.js").then(w=>w.Y);return{serverTimestamp:n}},__vite__mapDeps([0,1])),{getById:d}=await u(async()=>{const{getById:n}=await import("./main-PhcSwhut.js").then(w=>w.a7);return{getById:n}},__vite__mapDeps([0,1])),{create:t}=await u(async()=>{const{create:n}=await import("./main-PhcSwhut.js").then(w=>w.a4);return{create:n}},__vite__mapDeps([0,1])),e=await d(m);if(!e)throw new Error("Or√ßamento n√£o encontrado");const g=e.criadoPor||e.userId;if(!g)throw new Error("Dono do or√ßamento n√£o encontrado");const c=await h(i),l=c?.displayName||c?.email||"Usu√°rio";if(g===i){try{window.Snackbar&&window.Snackbar.info?window.Snackbar.info("Voc√™ √© o dono deste or√ßamento",2500):B.emit("snackbar:show",{message:"Voc√™ √© o dono deste or√ßamento",type:"info",duration:2500})}catch{}return}const _={type:"test_notification",budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:l,message:"Mensagem de teste enviada para o dono do or√ßamento",createdAt:o(),read:!1,recipientUid:g};await t(_);try{window.Snackbar&&window.Snackbar.success?window.Snackbar.success("Notifica√ß√£o de teste enviada ao dono",2500):B.emit("snackbar:show",{message:"Notifica√ß√£o de teste enviada ao dono",type:"success",duration:2500})}catch{}}catch(o){console.error("Erro ao enviar notifica√ß√£o de teste (dono):",o);try{window.Snackbar&&window.Snackbar.error?window.Snackbar.error("Erro ao enviar teste para dono",2500):B.emit("snackbar:show",{message:"Erro ao enviar teste para dono",type:"error",duration:2500})}catch{}}}async function $(m,i){try{const{serverTimestamp:o}=await u(async()=>{const{serverTimestamp:n}=await import("./main-PhcSwhut.js").then(w=>w.Y);return{serverTimestamp:n}},__vite__mapDeps([0,1])),{getById:d}=await u(async()=>{const{getById:n}=await import("./main-PhcSwhut.js").then(w=>w.a7);return{getById:n}},__vite__mapDeps([0,1])),{create:t}=await u(async()=>{const{create:n}=await import("./main-PhcSwhut.js").then(w=>w.a4);return{create:n}},__vite__mapDeps([0,1])),e=await d(m);if(!e)throw new Error("Or√ßamento n√£o encontrado");const g=Array.isArray(e.usuariosPermitidos)?e.usuariosPermitidos.slice():[],c=Array.from(new Set(g.filter(Boolean))).filter(n=>n!==i);if(!c.length){try{window.Snackbar&&window.Snackbar.info?window.Snackbar.info("Nenhum usu√°rio compartilhado para notificar",2500):B.emit("snackbar:show",{message:"Nenhum usu√°rio compartilhado para notificar",type:"info",duration:2500})}catch{}return}const l=await h(i),_=l?.displayName||l?.email||"Usu√°rio";await Promise.all(c.map(n=>t({type:"test_notification",budgetId:m,budgetName:e.nome||"Or√ßamento",senderUid:i,senderName:_,message:"Mensagem de teste enviada para usu√°rios compartilhados",createdAt:o(),read:!1,recipientUid:n})));try{window.Snackbar&&window.Snackbar.success?window.Snackbar.success("Notifica√ß√£o de teste enviada aos compartilhados",2500):B.emit("snackbar:show",{message:"Notifica√ß√£o de teste enviada aos compartilhados",type:"success",duration:2500})}catch{}}catch(o){console.error("Erro ao enviar notifica√ß√£o de teste (compartilhados):",o);try{window.Snackbar&&window.Snackbar.error?window.Snackbar.error("Erro ao enviar teste para compartilhados",2500):B.emit("snackbar:show",{message:"Erro ao enviar teste para compartilhados",type:"error",duration:2500})}catch{}}}export{h as getUserInfo,S as leaveSharedBudget,k as removeUserFromBudget,V as sendCategoryChangeNotification,L as sendRecorrenteChangeNotification,T as sendRecorrenteReminderNotification,C as sendTestNotificationToOwner,$ as sendTestNotificationToShared,b as sendTransactionDeletedNotification,O as sendTransactionNotification,A as sendTransactionUpdatedNotification,R as sendWeeklySummaryNotification};

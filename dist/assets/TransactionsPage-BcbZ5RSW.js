const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/main-BTanfOAJ.js","assets/vendor-7JQXQzuE.js","assets/main-Dc-JefT-.css"])))=>i.map(i=>d[i]);
import{_ as t,k as e,m as n}from"./main-BTanfOAJ.js";import{mountPeriodIndicator as a}from"./PeriodIndicator-BzehPW_n.js";import{s as r,r as o}from"./ConfigService-CM2NejyJ.js";import i from"./perf--GZdtUOV.js";import"./vendor-7JQXQzuE.js";async function d(t){const e=document.createElement("div");e.className="transactions-page";const r=document.createElement("div");r.className="tab-header mb-6",r.innerHTML='<h1 class="text-2xl font-semibold text-gray-900 leading-tight">üí∏ Transa√ß√µes</h1><div id="tx-period-indicator"></div>',e.appendChild(r);const o=document.createElement("div");o.className="transactions-content",o.innerHTML='\n  <div class="u-card bg-white dark:bg-gray-900 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 p-6">\n      <div class="flex justify-between items-center mb-6 gap-4">\n        <h3 class="text-lg font-bold text-gray-900 dark:text-white">üìã Lista de Transa√ß√µes</h3>\n  <button onclick="window.showAddTransactionModal()" class="btn btn-primary btn-sm">\n          ‚ûï Nova Transa√ß√£o\n        </button>\n      </div>\n      \n      <div class="text-center py-8">\n        <div class="text-4xl mb-4">üí∏</div>\n        <p class="text-gray-600 dark:text-gray-400">P√°gina de transa√ß√µes em desenvolvimento</p>\n        <p class="text-sm text-gray-500 dark:text-gray-500 mt-2">Carregando transa√ß√µes...</p>\n      </div>\n    </div>\n  ';try{const{year:t,month:e}=n(),a=`${t}-${String(e).padStart(2,"0")}`;if(!document.querySelector(`#month-${a}`)){const t=document.getElementById("transactions-list");t&&t.insertAdjacentHTML("afterbegin",g(a,[]))}}catch{}e.appendChild(o),t&&(t.innerHTML="",t.appendChild(e)),await async function(){try{try{s()}catch(t){}}catch(e){}}();try{a("#tx-period-indicator")}catch{}}function s(){const d=Date.now(),l=document.getElementById("app-content");try{R()}catch{}const g=window.appState.transactions||[],{year:u,month:y}=(()=>{try{if("undefined"!=typeof window&&"function"==typeof window.getSelectedPeriod){const t=window.getSelectedPeriod();if(t&&"number"==typeof t.year&&"number"==typeof t.month)return t}}catch{}return n()})(),m=`${u}-${String(y).padStart(2,"0")}`,x=g.filter(t=>N(t)===m),f=x.filter(t=>"receita"===t.tipo).reduce((t,e)=>t+parseFloat(e.valor),0),w=x.filter(t=>"despesa"===t.tipo).reduce((t,e)=>t+parseFloat(e.valor),0),b=f-w,h=x.length,$={};x.forEach(t=>{const e=F(t)||(t.createdAt&&t.createdAt.toDate?t.createdAt.toDate():new Date(t.createdAt)),n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}`;$[n]||($[n]=[]),$[n].push(t)}),l.innerHTML=`\n    <div class="tab-container">\n      <div class="tab-header">\n        <div class="bg-white dark:bg-gray-800 rounded-2xl p-4 shadow-sm border border-gray-200 dark:border-gray-600">\n          <div class="flex items-center justify-between w-full gap-4">\n            <div class="flex items-center gap-3">\n              <div class="flex items-center gap-2">\n                <div class="w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center">\n                  <span class="text-white text-sm">üìã</span>\n                </div>\n                <div>\n                  <h2 class="text-gray-800 dark:text-white font-semibold text-base">Transa√ß√µes</h2>\n                  <div class="flex items-center gap-1">\n                    <span class="text-blue-600 dark:text-blue-400 text-xs">${x.length} itens</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div id="tx-period-indicator"></div>\n          </div>\n        </div>\n      </div>\n      <div class="tab-content">\n        <div class="content-spacing">\n          \n          \n          \x3c!-- ========== SE√á√ÉO 1: RESUMO MELHORADO ========== --\x3e\n          <div class="mb-12">\n            <div class="flex items-center justify-between gap-2 mb-6">\n              <div class="flex items-center gap-2">\n                <div class="w-1 h-6 bg-gradient-to-b from-blue-500 to-green-500 rounded-full"></div>\n                <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-100">üí∞ Resumo</h2>\n              </div>\n              <div class="text-sm text-gray-500 dark:text-gray-400">\n                <span class="font-medium">${h}</span> ${1===h?"transa√ß√£o":"transa√ß√µes"}\n              </div>\n            </div>\n            \n            <div class="bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 rounded-2xl shadow-xl border border-green-200 dark:border-gray-600 overflow-hidden">\n              \x3c!-- Header Principal --\x3e\n              <div class="bg-gradient-to-r from-green-100 to-emerald-100 dark:from-gray-700 dark:to-gray-700 p-4 border-b border-green-200 dark:border-gray-600">\n                <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">\n                  <div>\n                    <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200 flex items-center gap-2">\n                      <span class="text-xl">üìä</span>\n                      ${String(y).padStart(2,"0")}/${u}\n                    </h3>\n                    <p class="text-sm text-gray-600 dark:text-gray-400">Resumo financeiro do per√≠odo</p>\n                  </div>\n                  <div class="text-right">\n                    <div class="text-2xl font-bold ${b>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}">\n                      R$ ${b.toFixed(2)}\n                    </div>\n                    <div class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b>=0?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}">\n                      ${b>=0?"‚úÖ Saldo Positivo":"‚ö†Ô∏è Saldo Negativo"}\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              \x3c!-- M√©tricas Detalhadas --\x3e\n              <div class="p-4">\n                <div class="grid grid-cols-2 gap-4 mb-4">\n                  <div class="bg-white dark:bg-gray-800 rounded-xl p-4 text-center shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md hover:scale-105 transition-all duration-200 cursor-pointer" onclick="event.stopPropagation(); event.preventDefault(); window.filterTransactionsByType('receita');" title="Clique para filtrar apenas receitas">\n                    <div class="text-2xl mb-2">üí∞</div>\n                    <div class="text-xl font-bold text-green-600 dark:text-green-400">R$ ${f.toFixed(2)}</div>\n                    <div class="text-sm text-gray-600 dark:text-gray-400">Receitas</div>\n                    <div class="text-xs text-gray-500 dark:text-gray-500 mt-1">Clique para filtrar</div>\n                  </div>\n                  \n                  <div class="bg-white dark:bg-gray-800 rounded-xl p-4 text-center shadow-sm border border-gray-200 dark:border-gray-600 hover:shadow-md hover:scale-105 transition-all duration-200 cursor-pointer" onclick="event.stopPropagation(); event.preventDefault(); window.filterTransactionsByType('despesa');" title="Clique para filtrar apenas despesas">\n                    <div class="text-2xl mb-2">üí∏</div>\n                    <div class="text-xl font-bold text-red-600 dark:text-red-400">R$ ${w.toFixed(2)}</div>\n                    <div class="text-sm text-gray-600 dark:text-gray-400">Despesas</div>\n                    <div class="text-xs text-gray-500 dark:text-gray-500 mt-1">Clique para filtrar</div>\n                  </div>\n                </div>\n                \n                \x3c!-- Barra de Progresso Visual --\x3e\n                <div class="bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-200 dark:border-gray-600">\n                  <div class="flex items-center justify-between mb-2">\n                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300 flex items-center gap-1">\n                      üìä Distribui√ß√£o do Saldo\n                      <span class="text-xs text-gray-500 dark:text-gray-400" title="Mostra a propor√ß√£o entre receitas (verde) e despesas (vermelho)">‚ÑπÔ∏è</span>\n                    </span>\n                    <div class="flex items-center gap-2">\n                      <span class="text-xs text-gray-500 dark:text-gray-400">${h} ${1===h?"transa√ß√£o":"transa√ß√µes"}</span>\n                      <button onclick="event.stopPropagation(); event.preventDefault(); window.clearTransactionFilter();" class="text-xs text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 font-medium" title="Limpar filtros">\n                        üîÑ Limpar filtros\n                      </button>\n                    </div>\n                  </div>\n                  <div class="flex h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden shadow-inner">\n                    <div class="bg-gradient-to-r from-green-500 to-green-600 h-full transition-all duration-500" style="width: ${f>0?Math.min(f/(f+w)*100,100):0}%"></div>\n                    <div class="bg-gradient-to-r from-red-500 to-red-600 h-full transition-all duration-500" style="width: ${w>0?Math.min(w/(f+w)*100,100):0}%"></div>\n                  </div>\n                  <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">\n                    <span>Receitas: ${f>0?(f/(f+w)*100).toFixed(1):0}%</span>\n                    <span>Despesas: ${w>0?(w/(f+w)*100).toFixed(1):0}%</span>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- ========== SE√á√ÉO 2: A√á√ïES E FILTROS ========== --\x3e\n          <div class="mb-12">\n            <div class="flex items-center gap-2 mb-4">\n              <div class="w-1 h-6 bg-gradient-to-b from-purple-500 to-blue-500 rounded-full"></div>\n              <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-100">üîß A√ß√µes & Filtros</h2>\n            </div>\n            \n            <div class="u-card bg-white dark:bg-gray-900 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden">\n              \x3c!-- Header --\x3e\n              <div class="bg-gradient-to-r from-purple-50 to-blue-50 dark:from-gray-800 dark:to-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">\n                <div class="flex flex-wrap justify-between items-center gap-2">\n                  <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">Gerenciar Transa√ß√µes</h3>\n                  <div class="flex gap-2">\n                    <button id="add-transaction-btn" class="btn btn-primary btn-sm">\n                      ‚ûï Nova Transa√ß√£o\n            </button>\n                    <button id="voice-btn" class="btn btn-outline btn-sm">\n                      üé§ Voz\n            </button>\n                  </div>\n                </div>\n          </div>\n          \n          \x3c!-- Filtro de pesquisa --\x3e\n              <div class="p-4">\n            <div class="relative">\n      <input \n                type="text" \n                id="transaction-search" \n                    placeholder="üîç Pesquisar por descri√ß√£o, categoria ou valor..." \n        class="u-input w-full pl-12"\n              />\n                  <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">\n                    <span class="text-gray-400 text-lg">üîç</span>\n              </div>\n            </div>\n            <div id="transaction-search-results" class="mt-2 text-sm text-gray-600 dark:text-gray-400 hidden">\n              <span id="transaction-search-count">0</span> transa√ß√£o(√µes) encontrada(s)\n                </div>\n              </div>\n            </div>\n          </div>\n          \n          \x3c!-- ========== SE√á√ÉO 3: LISTA DE TRANSA√á√ïES ========== --\x3e\n          <div class="mb-12">\n            <div class="flex items-center gap-2 mb-4">\n              <div class="w-1 h-6 bg-gradient-to-b from-green-500 to-teal-500 rounded-full"></div>\n              <h2 class="text-xl md:text-2xl font-bold text-gray-900 dark:text-gray-100">üìã Hist√≥rico</h2>\n            </div>\n\n            \x3c!-- Indicador de per√≠odo padronizado movido para o cabe√ßalho --\x3e\n            ${p()}\n            \n            <div id="transactions-list">${c()}</div>\n            ${0===x.length?'\n              <div class="empty-state mt-4">\n                <div class="empty-icon">üßæ</div>\n                <div class="empty-text">Sem transa√ß√µes neste per√≠odo</div>\n                <div class="mt-2"><button class="btn btn-primary w-full" onclick="window.showAddTransactionModal && window.showAddTransactionModal()">Adicionar transa√ß√£o</button></div>\n              </div>':""}\n          </div>\n        </div>\n      </div>\n    </div>\n  `;try{i.track("transactions:render:summary",{durationMs:Date.now()-d,total:h,month:y,year:u})}catch{}try{if(i.isEnabled()){const t=document.createElement("div");t.className="mt-4";const e=`${u}-${String(y).padStart(2,"0")}`,n=i.getLog(),a=n.filter(t=>"transactions:render:summary"===t.event),r=a[0],o=r?.durationMs||null,d=a.slice(0,10),s=d.length?Math.round(d.reduce((t,e)=>t+(e.durationMs||0),0)/d.length):null,c=n.find(t=>"transactions:virtualized:init"===t.event&&t.ym===e),p=n.find(t=>"transactions:virtualized:loadMore"===t.event&&t.ym===e),g=`\n        <div class="bg-gray-50 dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl p-3 text-xs text-gray-700 dark:text-gray-300">\n          <div class="font-semibold mb-1">M√©tricas (local)</div>\n          <div class="grid grid-cols-1 sm:grid-cols-3 gap-2">\n            <div>\n              <div class="text-gray-500">√öltimo render</div>\n              <div>${null!==o?o+" ms":"‚Äî"}</div>\n            </div>\n            <div>\n              <div class="text-gray-500">M√©dia (10)</div>\n              <div>${null!==s?s+" ms":"‚Äî"}</div>\n            </div>\n            <div>\n              <div class="text-gray-500">Per√≠odo</div>\n              <div>${e}</div>\n            </div>\n          </div>\n          <div class="mt-2 grid grid-cols-1 sm:grid-cols-2 gap-2">\n            <div>\n              <div class="text-gray-500">Inicial virtualizado</div>\n              <div>${c?`${c.rendered}/${c.keys} grupos ‚Ä¢ chunk ${c.chunk} ‚Ä¢ ${c.durationMs} ms`:"‚Äî"}</div>\n            </div>\n            <div>\n              <div class="text-gray-500">√öltimo loadMore</div>\n              <div>${p?`+${p.added} ‚Ä¢ nextIndex ${p.nextIndex} ‚Ä¢ ${p.durationMs} ms`:"‚Äî"}</div>\n            </div>\n          </div>\n        </div>`;t.innerHTML=g;const m=document.querySelector(".content-spacing");m?m.appendChild(t):l.appendChild(t)}}catch{}try{B(m)}catch{}try{a("#tx-period-indicator")}catch{}try{"function"!=typeof window.toggleDayGroup&&(window.toggleDayGroup=I),"function"!=typeof window.expandAllDays&&(window.expandAllDays=A),"function"!=typeof window.collapseAllDays&&(window.collapseAllDays=E),"function"!=typeof window.loadMonthSection&&(window.loadMonthSection=T),"function"!=typeof window.loadAllOlderMonths&&(window.loadAllOlderMonths=C),"function"!=typeof window.loadMoreDayGroups&&(window.loadMoreDayGroups=v)}catch{}try{"function"!=typeof window.editTransaction&&(window.editTransaction=async function(e){try{const n=(window.appState?.transactions||[]).find(t=>t.id===e);if(!n)return void(window.Snackbar&&window.Snackbar({message:"Transa√ß√£o n√£o encontrada",type:"error"}));"function"==typeof window.showAddTransactionModal?window.showAddTransactionModal(n):(await t(()=>import("./main-BTanfOAJ.js").then(t=>t.aa),__vite__mapDeps([0,1,2])),"function"==typeof window.showAddTransactionModal&&window.showAddTransactionModal(n))}catch(n){window.Snackbar&&window.Snackbar({message:"Erro ao abrir edi√ß√£o",type:"error"})}}),"function"!=typeof window.deleteTransactionWithConfirmation&&(window.deleteTransactionWithConfirmation=async function(e,n="transa√ß√£o"){try{const a=`Tem certeza que deseja excluir "${n}"?`;let r=!1;if(r="function"==typeof window.confirmDelete?await window.confirmDelete(n,"transa√ß√£o"):"function"==typeof window.showConfirmationModal?await new Promise(t=>{window.showConfirmationModal({title:"Excluir Transa√ß√£o",message:a,confirmText:"Sim, excluir",confirmColor:"bg-red-500 hover:bg-red-600",onConfirm:()=>t(!0),onCancel:()=>t(!1)})}):confirm(a),!r)return;const{deleteTransactionWithNotifications:o}=await t(async()=>{const{deleteTransactionWithNotifications:t}=await import("./main-BTanfOAJ.js").then(t=>t.a5);return{deleteTransactionWithNotifications:t}},__vite__mapDeps([0,1,2]));await o(e),window.Snackbar&&window.Snackbar({message:"Transa√ß√£o exclu√≠da",type:"success"});try{s()}catch{}}catch(a){window.Snackbar&&window.Snackbar({message:"Erro ao excluir",type:"error"})}})}catch(k){}"undefined"!=typeof document&&setTimeout(()=>{try{r();const t=document.getElementById("load-older-months-btn");t&&!t.dataset.bound&&(t.dataset.bound="1",t.addEventListener("click",()=>window.loadAllOlderMonths&&window.loadAllOlderMonths()))}catch(k){}},100),function(){try{if("function"==typeof window.setupTransactionSearch)return void window.setupTransactionSearch();const t=t=>(t??"").toString().toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim(),e=(t,e)=>{if(t===e)return 0;const n=t.length,a=e.length;if(0===n)return a;if(0===a)return n;if(Math.abs(n-a)>1)return 2;const r=Array(n+1).fill(0).map(()=>Array(a+1).fill(0));for(let o=0;o<=n;o++)r[o][0]=o;for(let o=0;o<=a;o++)r[0][o]=o;for(let o=1;o<=n;o++)for(let n=1;n<=a;n++){const a=t[o-1]===e[n-1]?0:1;r[o][n]=Math.min(r[o-1][n]+1,r[o][n-1]+1,r[o-1][n-1]+a),o>1&&n>1&&t[o-1]===e[n-2]&&t[o-2]===e[n-1]&&(r[o][n]=Math.min(r[o][n],r[o-2][n-2]+1))}return r[n][a]},a=(n,a)=>{const r=t(n),o=t(a);if(!o)return!0;if(r.includes(o))return!0;const i=r.split(/\s+/).filter(Boolean);for(const t of i)if(Math.abs(t.length-o.length)<=1&&e(t,o)<=1)return!0;return Math.abs(r.length-o.length)<=1&&e(r,o)<=1},r=document.getElementById("transaction-search"),o=document.getElementById("transaction-search-count"),i=document.getElementById("transaction-search-results"),d=document.getElementById("transactions-list");if(!r||!d)return;if("1"===r.dataset.bound)return;r.dataset.bound="1",r.addEventListener("input",()=>{r._debounceTimer&&clearTimeout(r._debounceTimer),r._debounceTimer=setTimeout(async()=>{const e=t(r.value);if(!e){i&&i.classList.add("hidden");try{d.innerHTML=c()}catch{d.innerHTML=""}return}const{year:s,month:l}=n(),p=(window.appState.transactions||[]).filter(t=>{let n;if(n=t?.createdAt&&"object"==typeof t.createdAt&&t.createdAt.seconds?new Date(1e3*t.createdAt.seconds):new Date(t.createdAt),!n||!n.getFullYear||n.getFullYear()!==s||n.getMonth()+1!==l)return!1;const r=t.descricao||"",o=(window.appState.categories||[]).find(e=>e.id===t.categoriaId),i=o?.nome||"",d=String(t.valor??"");return a(r,e)||a(i,e)||d.includes(e)});o&&(o.textContent=String(p.length)),i&&i.classList.remove("hidden");try{d.innerHTML=D(p)}catch{d.innerHTML=""}},150)}),r.addEventListener("keydown",t=>{"Escape"===t.key&&(r.value="",r.dispatchEvent(new Event("input")))})}catch(k){}}();try{if(!window.__txPeriodListenerBound){window.__txPeriodListenerBound=!0,e.on("period:changed",t=>setTimeout(()=>{const n=(window.location.hash||"").split("?")[0];if("#/transactions"===n){try{const e=t&&t.year||window.appState?.selectedYear,a=t&&t.month||window.appState?.selectedMonth;if(e&&a){const t=`${e}-${String(a).padStart(2,"0")}`,r=new URL(window.location.href);r.hash=`${n}?ym=${t}`,window.history&&window.history.replaceState&&window.history.replaceState(null,"",r.toString())}}catch{}s();try{e.emit("summary:updated",t||{})}catch{}}},0));const t=()=>setTimeout(()=>{"#/transactions"===(window.location.hash||"").split("?")[0]&&s()},0);e.on("transactions:updated",t),e.on("transaction:added",t),e.on("transaction:updated",t),e.on("transaction:deleted",t)}}catch{}o()}function l(){return d(document.getElementById("app-content"))}function c(){const{year:t,month:e}=(()=>{try{if("undefined"!=typeof window&&"function"==typeof window.getSelectedPeriod){const t=window.getSelectedPeriod();if(t&&"number"==typeof t.year&&"number"==typeof t.month)return t}}catch{}return n()})(),a=`${t}-${String(e).padStart(2,"0")}`,r={},o=window.appState?.currentBudget?.id,i=window.appState?.budgets||[],d=Array.isArray(i)&&i.length>1;(window.appState.transactions||[]).forEach(t=>{if(!o||t.budgetId===o||!d&&!t.budgetId){const e=N(t);if(!e)return;r[e]||(r[e]=[]),r[e].push(t)}});const s=Object.keys(r).sort().reverse();return[a,...s.filter(t=>t!==a)].map((t,e)=>{const n=r[t]||[];if(0===e)return g(t,n);const[a,o]=t.split("-"),i=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][parseInt(o)-1],d=n.filter(t=>"receita"===t.tipo).reduce((t,e)=>t+parseFloat(e.valor),0),s=n.filter(t=>"despesa"===t.tipo).reduce((t,e)=>t+parseFloat(e.valor),0),l=d-s;return`\n  <div id="month-${t}" class="u-card bg-white dark:bg-gray-900 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden mb-6" data-mes="${t}" data-loaded="0">\n        <div class="bg-gradient-to-r from-green-50 to-teal-50 dark:from-gray-800 dark:to-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">\n          <div class="flex justify-between items-center gap-4">\n            <div>\n              <h3 class="text-lg font-bold text-gray-900 dark:text-gray-100">${i} ${a}</h3>\n              <p class="text-sm text-gray-500 dark:text-gray-400">${n.length} transa√ß√µes</p>\n            </div>\n            <div class="text-right">\n              <div class="text-lg font-bold ${l>=0?"text-green-600":"text-red-600"}">R$ ${l.toFixed(2)}</div>\n              <div class="text-xs text-gray-500 dark:text-gray-400">+R$ ${d.toFixed(2)} ‚Ä¢ -R$ ${s.toFixed(2)}</div>\n            </div>\n          </div>\n        </div>\n        <div class="p-4">\n          <button class="btn btn-outline w-full" onclick="window.loadMonthSection && window.loadMonthSection('${t}')">\n            Carregar transa√ß√µes deste m√™s\n          </button>\n        </div>\n      </div>\n    `}).join("")}function p(){try{const t=window.appState.transactions||[];if(!t.length)return"";const e=new Set;return t.forEach(t=>{const n=F(t)||(t.createdAt&&t.createdAt.toDate?t.createdAt.toDate():new Date(t.createdAt));e.add(`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`)}),e.size<=2?"":'\n    <div class="mb-3 flex justify-end">\n  <button id="load-older-months-btn" class="btn btn-outline btn-sm">\n          Carregar meses anteriores\n        </button>\n      </div>\n    '}catch{return""}}function g(t,e){const[n,a]=t.split("-"),r=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][parseInt(a)-1],o=e.filter(t=>"receita"===t.tipo).reduce((t,e)=>t+parseFloat(e.valor),0),i=e.filter(t=>"despesa"===t.tipo).reduce((t,e)=>t+parseFloat(e.valor),0),d=o-i,s=new Date,l=parseInt(n)===s.getFullYear()&&parseInt(a)===s.getMonth()+1,c=window.appState?.selectedYear||s.getFullYear(),p=window.appState?.selectedMonth||s.getMonth()+1,g=parseInt(n)===parseInt(c)&&parseInt(a)===parseInt(p);return`\n  <div id="month-${t}" class="u-card bg-white dark:bg-gray-900 rounded-2xl shadow-xl border border-gray-200 dark:border-gray-700 overflow-hidden mb-6" data-mes="${t}" data-loaded="1">\n      <div class="bg-gradient-to-r from-blue-50 via-indigo-50 to-purple-50 dark:from-gray-800 dark:via-gray-700 dark:to-gray-800 p-4 border-b border-gray-200 dark:border-gray-700">\n        <div class="flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4">\n          <div class="order-2 sm:order-1">\n            <div class="flex items-center gap-3 mb-2">\n              <h3 class="text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100">${r} ${n}</h3>\n              ${l?'<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300">M√™s atual</span>':""}\n              ${!l&&g?'<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-emerald-100 text-emerald-700 dark:bg-emerald-900 dark:text-emerald-300">M√™s selecionado</span>':""}\n            </div>\n            <p class="text-sm text-gray-600 dark:text-gray-400 mb-3">${e.length} transa√ß√µes</p>\n            <div class="flex items-center gap-3 text-sm">\n              <button class="inline-flex items-center px-3 py-1 rounded-lg text-xs font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors" onclick="window.expandAllDays && window.expandAllDays('${t}')">\n                <span class="mr-1">üìÇ</span> Expandir todos\n              </button>\n              <button class="inline-flex items-center px-3 py-1 rounded-lg text-xs font-medium bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors" onclick="window.collapseAllDays && window.collapseAllDays('${t}')">\n                <span class="mr-1">üìÅ</span> Colapsar todos\n              </button>\n            </div>\n          </div>\n          <div class="order-1 sm:order-2 sm:text-right">\n            <div class="text-2xl font-bold ${d>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"} mb-1">\n              R$ ${d.toFixed(2)}\n            </div>\n            <div class="text-sm text-gray-600 dark:text-gray-400">\n              <span class="text-green-600 dark:text-green-400">+R$ ${o.toFixed(2)}</span>\n              <span class="mx-2">‚Ä¢</span>\n              <span class="text-red-600 dark:text-red-400">-R$ ${i.toFixed(2)}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class="p-4">\n        ${0===e.length?`\n          <div class="text-center py-12">\n            <div class="text-6xl mb-4">üóìÔ∏è</div>\n            <div class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2">Nenhuma transa√ß√£o neste m√™s</div>\n            <div class="text-sm text-gray-600 dark:text-gray-400 mb-6">Adicione sua primeira transa√ß√£o de ${r}</div>\n            <button onclick="showAddTransactionModal && showAddTransactionModal()" class="inline-flex items-center px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg font-medium transition-colors">\n              <span class="mr-2">‚ûï</span> Nova Transa√ß√£o\n            </button>\n          </div>\n        `:`\n        <div class="space-y-4" id="tx-day-items-${t}">\n          ${w(t,e,parseInt(n),parseInt(a))}\n        </div>\n        `}\n      </div>\n    </div>\n  `}const u=12;function y(){try{try{if("undefined"!=typeof localStorage){const t=parseInt(localStorage.getItem("txChunkSize"),10);if(!Number.isNaN(t)&&t>=6&&t<=40)return t}}catch{}const t="undefined"!=typeof window&&window.innerHeight?window.innerHeight:800,e="undefined"!=typeof navigator&&navigator.deviceMemory?navigator.deviceMemory:4;return t>=900||e>=6?16:t<=700||e<=2?10:u}catch{return u}}function m(){return"undefined"==typeof window?{}:(window.__txGroupCache||(window.__txGroupCache={}),window.__txGroupCache)}function x(t,e,n){const a={};t.forEach(t=>{const r=(t=>{try{const e=F(t);if(e&&!isNaN(e.getTime()))return e}catch{}try{if(t.createdAt?.toDate)return t.createdAt.toDate();const e=new Date(t.createdAt);if(!isNaN(e.getTime()))return e}catch{}return new Date(e,n-1,1)})(t),o=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;a[o]||(a[o]=[]),a[o].push({t:t,d:r})});return{keys:Object.keys(a).sort((t,e)=>t<e?1:-1),groups:a}}function f(t,e,n,a){try{const r=e.reduce((t,{t:e})=>t+("receita"===e?.tipo&&parseFloat(e.valor)||0),0),o=e.reduce((t,{t:e})=>t+("despesa"===e?.tipo&&parseFloat(e.valor)||0),0),i=r-o,d=e.sort((t,e)=>e.d.getTime()-t.d.getTime()).map(({t:t})=>S(t,n,a)).join(""),s=new Date,l=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,c=new Date(s.getFullYear(),s.getMonth(),s.getDate()-1),p=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`;let g;if(t===l)g="Hoje";else if(t===p)g="Ontem";else{const[e,n,a]=t.split("-").map(t=>parseInt(t,10));g=new Date(e,(n||1)-1,a||1).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})}const u=k(t);return`\n      <div class="tx-day-group">\n        <div class="tx-day-header tx-day-header--clickable" data-day-key="${t}" onclick="window.toggleDayGroup && window.toggleDayGroup('${t}')">\n          <span class="tx-day-chevron" data-chev-key="${t}">${u?"‚ñ∏":"‚ñæ"}</span>\n          ${g}\n        </div>\n        <div class="tx-day-summary">\n          <span class="text-green-600">+R$ ${r.toFixed(2)}</span>\n          <span class="text-gray-400">‚Ä¢</span>\n          <span class="text-red-600">-R$ ${o.toFixed(2)}</span>\n          <span class="text-gray-400">‚Ä¢</span>\n          <span class="${i>=0?"text-green-700":"text-red-700"}">Saldo ${i>=0?"":"-"}R$ ${Math.abs(i).toFixed(2)}</span>\n        </div>\n        <div class="tx-day-items space-y-2 sm:space-y-3" data-day-key="${t}" style="display: ${u?"none":"block"}">${d}</div>\n      </div>\n    `}catch(r){return""}}function w(t,e,n,a){try{const r=Date.now(),o=m(),{keys:d,groups:s}=x(e,n,a),l=y();o[t]={keys:d,groups:s,nextIndex:Math.min(l,d.length),ano:n,mes:a};const c=d.slice(0,l).map(t=>f(t,s[t],n,a)).join(""),p=d.length>l;try{i.track("transactions:virtualized:init",{durationMs:Date.now()-r,ym:t,keys:d.length,chunk:l,rendered:Math.min(l,d.length)})}catch{}const g=p?`\n    <div class="mt-3 flex justify-center">\n  <button id="more-days-${t}" class="btn btn-outline btn-sm" onclick="window.loadMoreDayGroups && window.loadMoreDayGroups('${t}')">Carregar mais dias</button>\n      </div>\n    `:"";return c+g+`<div id="scroll-sentinel-${t}" class="h-4"></div>`}catch(r){return b(e,n,a)}}function v(t){try{const e=Date.now(),n=m()[t];if(!n)return;const{keys:a,groups:r,ano:o,mes:d}=n,s=document.getElementById(`tx-day-items-${t}`);if(!s)return;let l=0,c=!1;try{const e=document.getElementById(`scroll-sentinel-${t}`);if(e&&"undefined"!=typeof window){const t=e.getBoundingClientRect(),n=window.innerHeight||0;t.top>0&&t.top<n+200&&(c=!0,l=t.top)}}catch{}const p=y(),g=n.nextIndex||0,u=Math.min(g+p,a.length);if(g>=u)return;const x=a.slice(g,u).map(t=>f(t,r[t],o,d)).join("");s.insertAdjacentHTML("beforeend",x);try{if(c&&"undefined"!=typeof window){const e=document.getElementById(`scroll-sentinel-${t}`);if(e){const t=e.getBoundingClientRect().top-l;0!==t&&window.scrollBy(0,t)}}}catch{}n.nextIndex=u;try{i.track("transactions:virtualized:loadMore",{durationMs:Date.now()-e,ym:t,added:u-g,nextIndex:n.nextIndex})}catch{}if(u>=a.length){const e=document.getElementById(`more-days-${t}`);e&&(e.style.display="none");const n=document.getElementById(`scroll-sentinel-${t}`);n&&(n.style.display="none")}}catch{}}function b(t,e,n){try{const a={},r=t=>{try{const e=F(t);if(e&&!isNaN(e.getTime()))return e}catch{}try{if(t.createdAt?.toDate)return t.createdAt.toDate();if(t.createdAt){const e=new Date(t.createdAt);if(!isNaN(e.getTime()))return e}}catch{}return new Date(e,n-1,1)};t.forEach(t=>{const e=r(t),n=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;a[n]||(a[n]=[]),a[n].push({t:t,d:e})});const o=Object.keys(a).sort((t,e)=>t<e?1:-1),i=new Date,d=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}-${String(i.getDate()).padStart(2,"0")}`,s=new Date(i.getFullYear(),i.getMonth(),i.getDate()-1),l=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,c=t=>t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});return o.map(t=>{const r=a[t],o=r.reduce((t,{t:e})=>t+("receita"===e?.tipo&&parseFloat(e.valor)||0),0),i=r.reduce((t,{t:e})=>t+("despesa"===e?.tipo&&parseFloat(e.valor)||0),0),s=o-i,p=r.sort((t,e)=>e.d.getTime()-t.d.getTime()).map(({t:t})=>S(t,e,n)).join("");let g;if(t===d)g="Hoje";else if(t===l)g="Ontem";else{const[e,n,a]=t.split("-").map(t=>parseInt(t,10)),r=new Date(e,(n||1)-1,a||1);g=c(r)}const u=k(t);return`\n          <div class="tx-day-group bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 mb-4 overflow-hidden">\n            <div class="tx-day-header bg-gradient-to-r from-gray-50 to-gray-100 dark:from-gray-700 dark:to-gray-600 p-3 border-b border-gray-200 dark:border-gray-600 cursor-pointer hover:from-gray-100 hover:to-gray-200 dark:hover:from-gray-600 dark:hover:to-gray-500 transition-colors" data-day-key="${t}" onclick="window.toggleDayGroup && window.toggleDayGroup('${t}')">\n              <div class="flex items-center justify-between">\n                <div class="flex items-center gap-3">\n                  <span class="tx-day-chevron text-lg text-gray-600 dark:text-gray-300 transition-transform duration-200" data-chev-key="${t}">${u?"‚ñ∏":"‚ñæ"}</span>\n                  <h4 class="font-semibold text-gray-800 dark:text-gray-200">${g}</h4>\n                </div>\n                <div class="text-right">\n                  <div class="text-sm font-bold ${s>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}">\n                    ${s>=0?"+":"-"}R$ ${Math.abs(s).toFixed(2)}\n                  </div>\n                </div>\n              </div>\n              <div class="tx-day-summary mt-2 flex items-center gap-2 text-sm">\n                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200">\n                  +R$ ${o.toFixed(2)}\n                </span>\n                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">\n                  -R$ ${i.toFixed(2)}\n                </span>\n                <span class="text-xs text-gray-500 dark:text-gray-400">\n                  ${r.length} transa√ß√£o${1!==r.length?"√µes":""}\n                </span>\n              </div>\n            </div>\n            <div class="tx-day-items p-3 space-y-3" data-day-key="${t}" style="display: ${u?"none":"block"}">${p}</div>\n          </div>\n        `}).join("")}catch(a){return t.map(t=>S(t,e,n)).join("")}}function h(){try{const t=localStorage.getItem("txCollapsedDays"),e=t?JSON.parse(t):[];if(Array.isArray(e))return new Set(e)}catch{}return new Set}function $(t){try{localStorage.setItem("txCollapsedDays",JSON.stringify(Array.from(t)))}catch{}}function k(t){return window.appState||(window.appState={}),window.appState.ui||(window.appState.ui={}),window.appState.ui.collapsedDays||(window.appState.ui.collapsedDays=h()),window.appState.ui.collapsedDays.has(t)}function S(t,e,n){const a=window.appState.categories?.find(e=>e.id===t.categoriaId),r=j(t,e,n),o="receita"===t.tipo;let i="";if(t.recorrenteId){let a=t.parcelaAtual,r=t.parcelasTotal;if(!a||!r){const o=window.appState.recorrentes?.find(e=>e.id===t.recorrenteId);o?(r=o.parcelasTotal,a=window.calcularParcelaRecorrente?window.calcularParcelaRecorrente(o,parseInt(e),parseInt(n)):1):(a=1,r=1)}i=r&&r>1?` ‚Ä¢ üîÑ ${a}/${r}`:" ‚Ä¢ üîÑ ‚ôæÔ∏è"}return`\n    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:shadow-md transition-all duration-200 group overflow-hidden">\n      <div class="p-4">\n        <div class="flex items-start justify-between gap-4">\n          <div class="flex items-start gap-3 min-w-0 flex-1">\n            <div class="flex-shrink-0">\n              <div class="w-12 h-12 rounded-full flex items-center justify-center text-lg ${o?"bg-green-100 text-green-600 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-600 dark:bg-red-900 dark:text-red-300"}">\n                ${o?"üí∞":"üí∏"}\n              </div>\n            </div>\n            <div class="min-w-0 flex-1">\n              <div class="flex items-center gap-2 mb-1">\n                <h4 class="font-semibold text-gray-900 dark:text-gray-100 truncate">${t.descricao}</h4>\n                ${t.recorrenteId?'<span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200">üîÑ</span>':""}\n              </div>\n              <div class="flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400">\n                <span class="font-medium">${a?.nome||"Sem categoria"}</span>\n                <span>‚Ä¢</span>\n                <span>${r}</span>\n                ${i?`<span class="text-xs">${i}</span>`:""}\n              </div>\n            </div>\n          </div>\n          <div class="text-right flex-shrink-0">\n            <div class="text-lg font-bold ${o?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}">\n              ${o?"+":"-"}R$ ${parseFloat(t.valor).toFixed(2)}\n            </div>\n            <div class="text-xs text-gray-500 dark:text-gray-400">${o?"receita":"despesa"}</div>\n          </div>\n        </div>\n      </div>\n      <div class="px-4 pb-3">\n        <div class="flex items-center justify-between">\n          <div class="flex items-center gap-2">\n            <div class="w-3 h-3 rounded-full" style="background-color: ${a?.cor||"#6B7280"}"></div>\n            <span class="text-xs text-gray-500 dark:text-gray-400">Categoria</span>\n          </div>\n          <div class="opacity-60 group-hover:opacity-100 flex gap-1 transition-opacity">\n            <button onclick="window.editTransaction && window.editTransaction('${t.id}')" class="p-2 rounded-lg hover:bg-blue-50 dark:hover:bg-blue-900 text-blue-600 hover:text-blue-800 transition-all duration-200" title="Editar transa√ß√£o">\n              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>\n              </svg>\n            </button>\n            <button onclick="window.deleteTransactionWithConfirmation && window.deleteTransactionWithConfirmation('${t.id}', '${(t.descricao||"").replace(/'/g,"\\'")}')" class="p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900 text-red-600 hover:text-red-800 transition-all duration-200" title="Excluir transa√ß√£o">\n              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `}function D(t){return t.length?t.map(t=>{const e=window.appState.categories?.find(e=>e.id===t.categoriaId),n=j(t),a="receita"===t.tipo;return`\n      <div class="list-item ${a?"border-l-4 border-l-green-500":"border-l-4 border-l-red-500"}">\n        <div class="flex-1 min-w-0">\n          <div class="list-item-title truncate">${t.descricao}</div>\n          <div class="list-item-subtitle text-xs sm:text-sm">\n            ${e?.nome||"Sem categoria"} ‚Ä¢ ${n}\n            ${t.recorrenteId?" ‚Ä¢ Recorrente":""}\n            ${(()=>{if(!t.recorrenteId)return"";let e=t.parcelaAtual,n=t.parcelasTotal;if(!e||!n){const a=window.appState.recorrentes?.find(e=>e.id===t.recorrenteId);if(a)if(n=a.parcelasTotal,window.calcularParcelaRecorrente){const t=new Date;e=window.calcularParcelaRecorrente(a,t.getFullYear(),t.getMonth()+1)}else e=1;else e=1,n=1}return n&&n>1?` ‚Ä¢ ${e} de ${n}`:" ‚Ä¢ Infinito"})()}\n          </div>\n        </div>\n        <div class="flex items-center gap-1 sm:gap-2 flex-shrink-0">\n          <span class="text-sm sm:text-base font-bold ${a?"text-green-600":"text-red-600"}">\n            ${a?"+":"-"}R$ ${parseFloat(t.valor).toFixed(2)}\n          </span>\n          <div class="flex gap-1">\n            <button onclick="window.editTransaction('${t.id}')" class="btn btn-outline btn-sm" title="Editar transa√ß√£o">\n              ‚úèÔ∏è\n            </button>\n            <button onclick="window.deleteTransactionWithConfirmation('${t.id}', '${t.descricao.replace(/'/g,"\\'")}')" class="btn btn-danger btn-sm" title="Excluir transa√ß√£o">\n              üóëÔ∏è\n            </button>\n          </div>\n        </div>\n      </div>\n    `}).join(""):'\n      <div class="text-center py-8">\n        <div class="text-4xl mb-4">üîç</div>\n        <div class="text-lg font-semibold text-gray-800 dark:text-white mb-2">Nenhuma transa√ß√£o encontrada</div>\n        <div class="text-gray-600 dark:text-gray-400">Tente usar termos diferentes na pesquisa</div>\n      </div>\n    '}function M(t){return t.recorrenteId?1:null}function T(t){try{const e=document.getElementById(`month-${t}`);if(!e||"1"===e.dataset.loaded)return;const[n,a]=t.split("-"),r=(window.appState.transactions||[]).filter(e=>N(e)===t);e.outerHTML=g(t,r),setTimeout(()=>{try{B(t)}catch{}},0)}catch(e){}}function I(t){if(!t)return;window.appState||(window.appState={}),window.appState.ui||(window.appState.ui={}),window.appState.ui.collapsedDays||(window.appState.ui.collapsedDays=h());const e=window.appState.ui.collapsedDays,n=document.querySelector(`.tx-day-items[data-day-key="${t}"]`),a=document.querySelector(`.tx-day-chevron[data-chev-key="${t}"]`);if(n){const r="none"!==n.style.display;n.style.display=r?"none":"block",a&&(a.textContent=r?"‚ñ∏":"‚ñæ"),r?e.add(t):e.delete(t),$(e)}}function A(t){try{if(!t)return;window.appState||(window.appState={}),window.appState.ui||(window.appState.ui={}),window.appState.ui.collapsedDays||(window.appState.ui.collapsedDays=h());const e=window.appState.ui.collapsedDays,n=`#month-${t} .tx-day-items`;document.querySelectorAll(n).forEach(t=>{t.style.display="block";const n=t.getAttribute("data-day-key");n&&e.delete(n)}),document.querySelectorAll(`#month-${t} .tx-day-chevron`).forEach(t=>t.textContent="‚ñæ"),$(e)}catch{}}function E(t){try{if(!t)return;window.appState||(window.appState={}),window.appState.ui||(window.appState.ui={}),window.appState.ui.collapsedDays||(window.appState.ui.collapsedDays=h());const e=window.appState.ui.collapsedDays,n=`#month-${t} .tx-day-items`;document.querySelectorAll(n).forEach(t=>{t.style.display="none";const n=t.getAttribute("data-day-key");n&&e.add(n)}),document.querySelectorAll(`#month-${t} .tx-day-chevron`).forEach(t=>t.textContent="‚ñ∏"),$(e)}catch{}}function F(t){try{let e=t?.dataEfetivacao||t?.dataLancamento||t?.data||t?.date||t?.createdAt;if(!e)return null;if(e&&"function"==typeof e.toDate)return e.toDate();if(e&&"object"==typeof e&&"number"==typeof e.seconds){const t=new Date(1e3*e.seconds);return isNaN(t.getTime())?null:t}if("string"==typeof e){const t=e.trim(),n=t.match(/^(\d{4})-(\d{2})-(\d{2})$/);if(n){const t=parseInt(n[1],10),e=parseInt(n[2],10)-1,a=parseInt(n[3],10);return new Date(t,e,a)}const a=new Date(t);return isNaN(a.getTime())?null:a}if("number"==typeof e){const t=new Date(e<1e12?1e3*e:e);return isNaN(t.getTime())?null:t}if(e instanceof Date)return e;const n=new Date(e);return isNaN(n.getTime())?null:n}catch{return null}}function N(t){try{if("string"==typeof t?.competencia){const e=t.competencia.trim();let n;if(n=e.match(/^(\d{1,2})\/(\d{4})$/),n)return`${n[2]}-${String(parseInt(n[1],10)).padStart(2,"0")}`;if(n=e.match(/^(\d{4})-(\d{2})$/),n)return`${n[1]}-${n[2]}`}const e=[t?.mes,t?.mesReferencia,t?.mesLancamento,t?.mesCompetencia],n=[t?.ano,t?.anoReferencia,t?.anoLancamento,t?.anoCompetencia],a=e.findIndex(t=>null!=t&&""!==t),r=n.findIndex(t=>null!=t&&""!==t);if(-1!==a&&-1!==r){const t=parseInt(e[a],10),o=parseInt(n[r],10);if(!Number.isNaN(t)&&t>=1&&t<=12&&!Number.isNaN(o)&&o>1900)return`${o}-${String(t).padStart(2,"0")}`}const o=t?.dataEfetivacao||t?.dataLancamento||t?.data||t?.date||t?.createdAt;if(!o)return null;if(o&&"function"==typeof o.toDate){const t=o.toDate(),e=t.getFullYear(),n=t.getMonth()+1;return`${e}-${String(n).padStart(2,"0")}`}if(o&&"object"==typeof o&&"number"==typeof o.seconds){const t=new Date(1e3*o.seconds);if(!isNaN(t.getTime())){const e=t.getFullYear(),n=t.getMonth()+1;return`${e}-${String(n).padStart(2,"0")}`}return null}if("number"==typeof o){const t=new Date(o<1e12?1e3*o:o);if(!isNaN(t.getTime())){const e=t.getFullYear(),n=t.getMonth()+1;return`${e}-${String(n).padStart(2,"0")}`}return null}if("string"==typeof o){const t=o.trim();let e;if(e=t.match(/^(\d{4})-(\d{2})-(\d{2})/),e)return`${e[1]}-${e[2]}`;if(e=t.match(/^(\d{4})-(\d{2})$/),e)return`${e[1]}-${e[2]}`;if(e=t.match(/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/),e){const t=parseInt(e[3],10),n=parseInt(e[2],10);return`${t}-${String(n).padStart(2,"0")}`}if(e=t.match(/^(\d{1,2})\/(\d{4})$/),e){const t=parseInt(e[2],10),n=parseInt(e[1],10);return`${t}-${String(n).padStart(2,"0")}`}const n=new Date(t);if(!isNaN(n.getTime())){const t=n.getFullYear(),e=n.getMonth()+1;return`${t}-${String(e).padStart(2,"0")}`}return null}return null}catch{return null}}function j(t,e,n){const a=F(t);if(a)return a.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"});const r=N(t);if(r){const[t,e]=r.split("-");return`${e}/${t}`}return e&&n?`${String(n).padStart(2,"0")}/${e}`:"--/--"}function C(){try{document.querySelectorAll('[id^="month-"][data-loaded="0"]').forEach(t=>{const e=t.dataset.mes;e&&window.loadMonthSection&&window.loadMonthSection(e)})}catch{}}function L(){return window.__txInfinite||(window.__txInfinite={observers:{},loading:{}}),window.__txInfinite}function R(){try{const t=L();Object.values(t.observers).forEach(t=>{try{t.disconnect()}catch{}}),t.observers={},t.loading={}}catch{}}function B(t){try{const e=L();if(e.observers[t])return;const n=document.getElementById(`scroll-sentinel-${t}`);if(!n)return;if("undefined"==typeof window||!("IntersectionObserver"in window))return;const a=document.getElementById(`more-days-${t}`);let r;a&&(a.style.display="none");const o=n=>{for(const a of n)if(a.isIntersecting){if(e.loading[t])return;const n=m()[t];if(!n)return;const{keys:a,nextIndex:o=0}=n;if(o>=a.length)return;e.loading[t]=!0;try{v(t)}finally{setTimeout(()=>{e.loading[t]=!1;try{const n=m()[t];if(n&&n.nextIndex>=n.keys.length){if(r)try{r.disconnect()}catch{}delete e.observers[t];const n=document.getElementById(`scroll-sentinel-${t}`);n&&(n.style.display="none")}}catch{}},0)}}};r=new window.IntersectionObserver(o,{root:null,rootMargin:"600px 0px",threshold:0}),r.observe(n),e.observers[t]=r}catch{}}try{"undefined"!=typeof window&&import.meta,0}catch{}window.filterTransactionsByType=function(t){try{window.Snackbar&&window.Snackbar({message:`Filtrando ${"receita"===t?"receitas":"despesas"}...`,type:"info",duration:2e3});const{year:e,month:a}=n(),r=`${e}-${String(a).padStart(2,"0")}`,o=document.querySelector(`#month-${r}`);if(!o)return;const i=o.querySelectorAll(".bg-white.dark\\:bg-gray-800.rounded-xl");let d=0,s=0;i.forEach(e=>{const n=e.querySelectorAll(".text-xs.text-gray-500.dark\\:text-gray-400");let a=null;n.forEach(t=>{const e=t.textContent.toLowerCase().trim();"receita"!==e&&"despesa"!==e||(a=e)}),a&&(a===t?(e.style.display="block",e.style.opacity="1",e.style.transform="scale(1)",d++):(e.style.display="none",e.style.opacity="0",e.style.transform="scale(0.95)",s++))}),window.Snackbar&&window.Snackbar({message:`Filtro aplicado: ${d} ${"receita"===t?"receitas":"despesas"} encontradas`,type:"success",duration:3e3})}catch(e){window.Snackbar&&window.Snackbar({message:"Erro ao aplicar filtro",type:"error",duration:3e3})}},window.clearTransactionFilter=function(){try{window.Snackbar&&window.Snackbar({message:"Limpando filtros...",type:"info",duration:1500});const{year:t,month:e}=n(),a=`${t}-${String(e).padStart(2,"0")}`,r=document.querySelector(`#month-${a}`);if(!r)return;const o=r.querySelectorAll(".bg-white.dark\\:bg-gray-800.rounded-xl");let i=0;o.forEach(t=>{t.style.display="block",t.style.opacity="1",t.style.transform="scale(1)",i++}),window.Snackbar&&window.Snackbar({message:`Filtros removidos: ${i} transa√ß√µes restauradas`,type:"success",duration:2e3})}catch(t){window.Snackbar&&window.Snackbar({message:"Erro ao limpar filtros",type:"error",duration:3e3})}};export{M as calcularNumeroParcela,E as collapseAllDays,l as default,A as expandAllDays,j as formatTransactionDisplayDate,h as getCollapsedDays,F as getTransactionDate,N as getTransactionYearMonth,k as isDayCollapsed,C as loadAllOlderMonths,T as loadMonthSection,v as loadMoreDayGroups,d as render,c as renderAllTransactions,w as renderDayGroupsVirtualized,D as renderFilteredTransactions,g as renderMonthSectionHTML,p as renderOlderMonthsControl,S as renderTransactionItemHTML,s as renderTransactions,b as renderTransactionsGroupedByDay,$ as saveCollapsedDays,B as setupInfiniteScrollForMonth,R as teardownInfiniteScroll,I as toggleDayGroup};

import{VoiceSystem as w}from"./VoiceSystem-CEBe8orV.js";function f(o){const s={zero:0,um:1,uma:1,dois:2,duas:2,tr√™s:3,tres:3,quatro:4,cinco:5,seis:6,sete:7,oito:8,nove:9,dez:10,onze:11,doze:12,treze:13,quatorze:14,catorze:14,quinze:15,dezesseis:16,dezessete:17,dezoito:18,dezenove:19,vinte:20,trinta:30,quarenta:40,cinquenta:50,sessenta:60,setenta:70,oitenta:80,noventa:90,cem:100,cento:100,sem:100,duzentos:200,trezentos:300,quatrocentos:400,quinhentos:500,seiscentos:600,setecentos:700,oitocentos:800,novecentos:900,mil:1e3};return o?(o=o.toLowerCase().replace(/\./g,""),s[o]!==void 0?s[o]:o.includes(" e ")?o.split(" e ").reduce((e,n)=>{const r=f(n);return isNaN(r)?e:e+r},0):NaN):NaN}async function N(o){const e=o.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").split(" ");if(e.length<4){alert('Comando inv√°lido. Use: "descri√ß√£o valor tipo categoria"');return}let n=e.findIndex(t=>!isNaN(parseFloat(t))),r=NaN;if(n!==-1)r=parseFloat(e[n]);else for(let t=0;t<e.length;t++){const a=f(e[t]);if(!isNaN(a)&&a>0){r=a,n=t;break}}if(isNaN(r)){alert('Valor n√£o encontrado no comando (diga um n√∫mero, ex: "cem", "duzentos", "mil" ou "100")');return}const c=e.findIndex(t=>/^(receita|receitas|despesa|despesas)$/.test(t));if(c===-1){alert("Tipo n√£o encontrado (receita ou despesa)");return}let i=e[c];/^receita/.test(i)&&(i="receita"),/^despesa/.test(i)&&(i="despesa");const d=e[e.length-1],l=e.slice(0,n).join(" "),m=window.appState.categories.find(t=>u(t.nome).includes(u(d))||u(d).includes(u(t.nome)));if(!m){alert(`Categoria "${d}" n√£o encontrada. Crie a categoria primeiro.`);return}window.showAddTransactionModal({descricao:l,valor:r,tipo:i,categoriaId:m.id})}async function z(o){const e=o.toLowerCase().normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").split(" ");if(e.length<3){alert('Comando inv√°lido. Use: "nome tipo limite"');return}const n=e.findIndex(t=>["receita","despesa"].includes(t));if(n===-1){alert("Tipo n√£o encontrado (receita ou despesa)");return}const r=e[n];let c=e.findIndex(t=>!isNaN(parseFloat(t))),i=NaN;if(c!==-1)i=parseFloat(e[c]);else for(let t=0;t<e.length;t++){const a=f(e[t]);if(!isNaN(a)&&a>0){i=a,c=t;break}}if(isNaN(i)){alert('Limite n√£o encontrado (diga um n√∫mero, ex: "cem", "duzentos", "mil" ou "100")');return}const d=e.slice(0,n).join(" ");if(!d){alert("Nome da categoria n√£o encontrado");return}const l=["#4F46E5","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899","#06B6D4","#84CC16"],m=l[Math.floor(Math.random()*l.length)];window.showAddCategoryModal({nome:d,tipo:r,limite:i,cor:m})}function u(o){return o.normalize("NFD").replace(new RegExp("\\p{Diacritic}","gu"),"").toLowerCase().replace(/[.,;:!?]+$/,"").trim()}function p(){return window.voiceSystem||(window.voiceSystem=new w),window.voiceSystem}function h(o="transaction"){return console.log("üé§ openVoiceModal chamado:",o),p().start(o)}function x(){console.log("üé§ closeVoiceModal chamado"),window.voiceSystem&&window.voiceSystem.stop()}function C(o="transaction"){return console.log("üé§ startVoiceRecognition chamado:",o),p().start(o)}async function y(o,s){if(console.log("üé§ processVoiceCommand chamado (compatibilidade):",o,s),window.voiceSystem)try{await window.voiceSystem.processCommand(o,s)}catch(e){console.error("‚ùå Erro no novo sistema de voz:",e),window.Snackbar&&window.Snackbar.show(`Erro ao processar comando: ${e.message}`,"error")}else console.warn("‚ö†Ô∏è Sistema de voz n√£o dispon√≠vel")}export{x as closeVoiceModal,p as getVoiceSystem,u as normalizarTexto,h as openVoiceModal,f as parseNumeroPorExtenso,z as processCategoryVoice,N as processTransactionVoice,y as processVoiceCommand,C as startVoiceRecognition};

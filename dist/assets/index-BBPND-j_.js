import{k as t}from"./main-BTanfOAJ.js";import{createPeriodIndicator as e}from"./PeriodIndicator-BzehPW_n.js";function a(e){const a=document.createElement("nav");a.className="bottom-nav";let n=null;[{icon:"ðŸ“Š",label:"Dashboard",shortLabel:"Dash",route:"/dashboard"},{icon:"ðŸ’¸",label:"TransaÃ§Ãµes",shortLabel:"Trans",route:"/transactions"},{icon:"ðŸ“‚",label:"Categorias",shortLabel:"Cat",route:"/categories"},{icon:"ðŸ“ˆ",label:"AnÃ¡lises",shortLabel:"AnÃ¡l.",route:"/analytics"},{icon:"â™»ï¸",label:"Recorrentes",shortLabel:"Rec",route:"/recorrentes"},{icon:"ðŸ””",label:"NotificaÃ§Ãµes",shortLabel:"Notif",route:"/notifications"},{icon:"âš™ï¸",label:"Config",shortLabel:"Conf",route:"/settings"}].forEach(o=>{const r=document.createElement("button");r.className="nav-btn",e===o.route&&r.classList.add("active"),r.setAttribute("data-route",o.route),r.setAttribute("aria-label",o.label);const i="/notifications"===o.route?'\n      <span class="notification-badge absolute -top-1 -right-1 bg-red-500 text-white text-[10px] rounded-full h-4 w-4 sm:h-5 sm:w-5 flex items-center justify-center font-bold leading-none transition-transform duration-200" style="display: none;" aria-live="polite" aria-atomic="true">\n        0\n      </span>\n    ':"",s="/settings"===o.route?'\n      <span class="update-dot absolute -top-0.5 -right-0.5 bg-amber-400 dark:bg-amber-300 rounded-full h-2.5 w-2.5 ring-2 ring-white dark:ring-gray-900" style="display: none;" title="AtualizaÃ§Ã£o disponÃ­vel"></span>\n    ':"";r.innerHTML=`\n      <span class="tab-indicator"></span>\n      <div class="relative w-6 h-6 flex items-center justify-center">\n        <span class="text-[20px] leading-none transition-transform duration-200">${o.icon}</span>\n        ${i}\n        ${s}\n      </div>\n      <span class="text-[8px] sm:text-[10px] md:text-sm font-medium leading-tight truncate max-w-[40px] sm:max-w-none">${window.innerWidth<640?o.shortLabel:o.label}</span>\n    `,r.addEventListener("touchstart",()=>{r.style.transform="scale(0.95)"}),r.addEventListener("touchend",()=>{r.style.transform=""});let l=!1;if(r.addEventListener("click",async t=>{if(t.preventDefault(),!l){l=!0;try{await(async(t,e)=>{const a=t.route,n=document.querySelector(".nav-btn.active");if(!n||n.getAttribute("data-route")!==a){e.style.transform="scale(0.95)",e.style.opacity="0.8";try{document.querySelectorAll(".nav-btn").forEach(t=>{t.classList.remove("active")}),e.classList.add("active"),window.router?await window.router(a):window.routerNavigate?await window.routerNavigate(a):window.location.hash=a,window.updatePageTitle&&window.updatePageTitle(a)}catch(o){window.location.hash=a,e.style.backgroundColor="#fef2f2",e.style.color="#dc2626",setTimeout(()=>{e.style.backgroundColor="",e.style.color=""},1e3),window.Snackbar&&window.Snackbar({message:"Erro na navegaÃ§Ã£o. Tente novamente.",type:"error"})}finally{setTimeout(()=>{e.style.transform="",e.style.opacity=""},200)}}})(o,r)}finally{setTimeout(()=>{l=!1},500)}}}),"/notifications"===o.route){const e=r.querySelector(".notification-badge"),a=t=>{try{const a=(Array.isArray(t)?t:Array.isArray(window.appState?.notifications)?window.appState.notifications:[]).filter(t=>!t.read).length;if(!e)return;const n=a>99?"99+":String(a);if(a>0){const t=e.textContent;if(e.textContent=n,e.style.display="flex",t!==n){"function"==typeof window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches||(e.style.transform="scale(1.15)",setTimeout(()=>{try{e.style.transform=""}catch{}},180))}}else e.style.display="none"}catch{}};a(),n=t.on("notifications:updated",a)}if("/settings"===o.route){const e=r.querySelector(".update-dot"),a=t=>{try{e&&(e.style.display=t?"block":"none")}catch{}};try{a(Boolean(window.__updateAvailable))}catch{}try{t.on("update:available",a)}catch{}}a.appendChild(r)});const o=new MutationObserver(()=>{if(!a.isConnected){try{n&&n()}catch{}try{o.disconnect()}catch{}}});try{o.observe(document.body,{childList:!0,subtree:!0})}catch{}return a}const n=Object.freeze(Object.defineProperty({__proto__:null,BottomNav:a},Symbol.toStringTag,{value:"Module"})),o=Object.freeze(Object.defineProperty({__proto__:null,BottomNav:a,createPeriodIndicator:e},Symbol.toStringTag,{value:"Module"}));export{n as B,o as i};
